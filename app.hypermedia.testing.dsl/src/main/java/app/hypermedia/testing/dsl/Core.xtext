grammar app.hypermedia.testing.dsl.Core with org.eclipse.xtext.common.Terminals

generate core "http://testing.hypermedia.app/dsl/core"

Model:
    (steps+=TopLevelStep)*;

TopLevelStep:
	ClassBlock;
	
ResponseStep:
    StatusStatement |
    RepresentationStep
;

RepresentationStep:
    PropertyBlock |
    PropertyStatement;
    
terminal WITH_MODIFIER: 'With';
terminal EXPECT_MODIFIER: 'Expect';

ClassBlock:
	WITH_MODIFIER 'Class' name=STRING '{'
		(children+=RepresentationStep)*
		hatch=HATCH?
	'}';

PropertyBlock:
    modifier=(WITH_MODIFIER | EXPECT_MODIFIER) 'Property' name=STRING '{'
        (children+=RepresentationStep)*
        hatch=HATCH?
    '}'
;

PropertyStatement:
    EXPECT_MODIFIER 'Property' name=STRING (value=STRING)?
;

StatusStatement:
    EXPECT_MODIFIER 'Status' status=INT
;

terminal HATCH: '++' -> '++';

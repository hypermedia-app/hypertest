/*
 * generated by Xtext 2.18.0
 */
package app.hypermedia.testing.dsl.generator

import app.hypermedia.testing.dsl.hydra.OperationBlock
import app.hypermedia.testing.dsl.hydra.InvocationBlock
import app.hypermedia.testing.dsl.hydra.RelaxedOperationBlock
import app.hypermedia.testing.dsl.Modifier

/**
 * Generates code from your model files on save.
 * 
 * See https://www.eclipse.org/Xtext/documentation/303_runtime_concepts.html#code-generation
 */
class HydraGenerator extends CoreGenerator {

    def dispatch step(OperationBlock it) '''
        {
            "type": "Operation",
            "operationId": "«name»",
            "children": [
                «FOR invocation:invocations SEPARATOR ","»
                    «invocation.step»
                «ENDFOR»
            ],
            "strict": «if (modifier == Modifier.WITH) {
                false
            } else {
                true
            }»
            
        }
    '''

    def dispatch step(RelaxedOperationBlock it) '''
        {
            "type": "Operation",
            "operationId": "«name»",
            "children": [
                «FOR invocation:invocations SEPARATOR ","»
                    «invocation.step»
                «ENDFOR»
            ],
            "strict": false
        }
    '''
    
    def dispatch step(InvocationBlock it) '''
        {
            "type": "Invocation"
        }
    '''
}
